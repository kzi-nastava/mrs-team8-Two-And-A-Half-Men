import{b,c as l,d as M,e as O,f as h,g as p,i as v,l as x,m as S,s as y,v as F}from"./chunk-OXPWAMAC.js";import{f as _}from"./chunk-DMUBA5XY.js";import{a as N}from"./chunk-YHIKCUN3.js";import"./chunk-5IMUJISG.js";import{b as R}from"./chunk-GX4BJWGY.js";import"./chunk-WZWIJEA2.js";import{Ha as c,Hb as n,P as d,Va as P,eb as u,fb as f,kb as w,lb as e,mb as o,nb as g,wb as C}from"./chunk-GHGVHUHC.js";import"./chunk-TSRGIXR5.js";function k(s,i){s&1&&n(0," Password must be at least 6 characters. ")}function j(s,i){s&1&&n(0," Passwords do not match. ")}var E=class s{unregisteredAuthService=d(N);router=d(_);popupsService=d(R);restartPasswordForm=new h({password:new p("",[l.required,l.minLength(6)]),confirmPassword:new p("",[l.required])});onSubmit(){if(!this.restartPasswordForm.valid)return;let i=this.restartPasswordForm.get("password")?.value??"",a=this.restartPasswordForm.get("confirmPassword")?.value??"";if(i!==a){this.restartPasswordForm.get("confirmPassword")?.setErrors({mismatch:!0});return}let t=new URLSearchParams(window.location.search).get("token")||"";t&&this.unregisteredAuthService.restartPassword(t,i).subscribe({next:()=>{this.popupsService.success("Success","Password has been reset successfully.",{onConfirm:()=>this.router.navigate(["/login"])})},error:()=>{this.popupsService.error("Error","Failed to reset password. Please try again.")}})}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=P({type:s,selectors:[["app-restart-password"]],decls:20,vars:3,consts:[[1,"main"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"login-container"],[1,"form-group"],["type","password","id","password","formControlName","password","required","","placeholder"," "],["for","password","id","focus"],["id","error-message",1,"error-message"],["type","password","id","confirmPassword","formControlName","confirmPassword","required","","placeholder"," "],["for","confirmPassword","id","focus"],[1,"button-container"],["type","submit",1,"submit-btn"]],template:function(a,t){if(a&1&&(e(0,"main",0)(1,"form",1),C("ngSubmit",function(){return t.onSubmit()}),e(2,"div",2)(3,"h2"),n(4,"Restart Password"),o(),e(5,"div",3),g(6,"input",4),e(7,"label",5),n(8,"Password"),o(),e(9,"small",6),u(10,k,1,0),o()(),e(11,"div",3),g(12,"input",7),e(13,"label",8),n(14,"Confirm Password"),o(),e(15,"small",6),u(16,j,1,0),o()()(),e(17,"div",9)(18,"button",10),n(19,"Restart password"),o()()()()),a&2){let r,m;c(),w("formGroup",t.restartPasswordForm),c(9),f((r=t.restartPasswordForm.get("password"))!=null&&r.invalid&&((r=t.restartPasswordForm.get("password"))!=null&&r.dirty||(r=t.restartPasswordForm.get("password"))!=null&&r.touched)?10:-1),c(6),f((m=t.restartPasswordForm.get("confirmPassword"))!=null&&m.invalid&&((m=t.restartPasswordForm.get("confirmPassword"))!=null&&m.dirty||(m=t.restartPasswordForm.get("confirmPassword"))!=null&&m.touched)?16:-1)}},dependencies:[F,v,b,M,O,y,S,x],styles:[".user-form[_ngcontent-%COMP%]{align-self:center;display:flex;flex-direction:column;justify-content:flex-start;width:30%;height:50%;padding:20px;border:.1rem solid #1C6331;border-radius:5px;background-color:#322d2b;color:#fff}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;border-bottom:#fff .1rem solid;margin-left:10px;margin-right:10px;margin-bottom:5rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:80%;margin-bottom:1rem;margin-left:10%;position:relative}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;padding:.3rem;border-radius:10px;border:#1C6331 .1rem solid}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   #focus[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;color:#aaa;font-size:1rem;pointer-events:none;transition:all .2s ease-out}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:#1C6331 .2rem solid}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;align-items:center}.user-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{width:80%;margin-left:10%;background-color:#1c6331;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}.user-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background-color:#145224}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]{text-align:center;color:#ccc}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin-bottom:1rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + #focus[_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + #focus[_ngcontent-%COMP%]{top:-.7rem;font-size:.75rem;color:#fff}small[_ngcontent-%COMP%]{color:#ff4d4d;font-size:12px;display:block;margin-top:5px}.main[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:space-evenly;align-items:flex-end;background-color:#222121}@media(max-width:768px){.user-form[_ngcontent-%COMP%]{width:80%}.object[_ngcontent-%COMP%]{display:none}}@media(max-height:430px){.main[_ngcontent-%COMP%]{align-items:center}.user-form[_ngcontent-%COMP%]{justify-content:center}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}}"]})};export{E as RestartPassword};
