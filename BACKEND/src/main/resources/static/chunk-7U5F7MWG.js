import{a as G}from"./chunk-UHK5O6KU.js";import{a as B,b as q}from"./chunk-HPMAGG7F.js";import{a as A}from"./chunk-ZCQDYGVD.js";import{a as E,b as R,c as F}from"./chunk-ZZU5WPUM.js";import{a as k}from"./chunk-QXKYPX7G.js";import{v as O}from"./chunk-OXPWAMAC.js";import{f as x}from"./chunk-DMUBA5XY.js";import{b as V}from"./chunk-GX4BJWGY.js";import"./chunk-WZWIJEA2.js";import{Ha as o,Hb as C,Ib as P,Mb as M,Nb as N,Ob as D,P as v,U as S,V as T,Va as w,W as d,Za as _,eb as g,fa as c,fb as f,kb as p,lb as r,mb as s,nb as h,ub as y,wb as b,yb as u}from"./chunk-GHGVHUHC.js";import"./chunk-TSRGIXR5.js";function Y(i,e){i&1&&(d(),r(0,"svg",11),h(1,"path",13),s())}function j(i,e){i&1&&(d(),r(0,"svg",11),h(1,"path",14),s())}function z(i,e){i&1&&_(0,j,2,0,"ng-template",4)}function L(i,e){if(i&1&&(r(0,"div",5),C(1),s()),i&2){let n=u();o(),P(n.saveMessage())}}function H(i,e){if(i&1){let n=y();r(0,"app-tab-content",7)(1,"app-vehicle-info-form",15),b("vehicleInfoChange",function(m){S(n);let a=u();return T(a.vehicleInfo.set(m))}),s()()}if(i&2){let n=u();p("tabId","vehicle")("activeTab",n.activeTab()),o(),p("vehicleInfo",n.vehicleInfo())("vehicleTypes",n.vehicleTypes())("availableServices",n.availableServices())}}var U=class i{usersService=v(G);vehiclesService=v(A);router=v(x);popupsService=v(V);personalInfo=c({firstName:"",lastName:"",phoneNumber:"",address:"",email:"",imgSrc:null});vehicleInfo=c({type:"",additionalServices:[],model:"",numberOfSeats:0,licensePlate:""});vehicleTypes=c([]);availableServices=c([]);saveMessage=c("");isSaving=c(!1);activeTab=c("personal");personalTab={id:"personal",label:"Personal data",position:"left"};vehicleTab={id:"vehicle",label:"Vehicle data",position:"left"};get tabs(){return[this.personalTab,this.vehicleTab]}ngOnInit(){this.loadVehicleOptions()}loadVehicleOptions(){this.vehiclesService.getVehicleOptions().subscribe({next:e=>{this.vehicleTypes.set(e.vehicleTypes),this.availableServices.set(e.additionalServices)},error:e=>{console.error("Failed to load vehicle options",e)}})}onTabChange(e){this.activeTab.set(e)}saveChanges(){this.isSaving.set(!0);let e=this.personalInfo(),n=this.vehicleInfo(),t=this.vehicleTypes(),m=this.availableServices(),a={personalInfo:{firstName:e.firstName,lastName:e.lastName,email:e.email,address:e.address,phoneNumber:e.phoneNumber},vehicleInfo:{model:n.model,licensePlate:n.licensePlate,numberOfSeats:n.numberOfSeats,typeId:t?.find(l=>l.typeName===n.type)?.id??-1,additionalServicesIds:n.additionalServices.map(l=>{let I=m.find(W=>W.name===l);return I?I.id:-1}).filter(l=>l!==null)}};console.log(a),this.usersService.registerDriver(a).subscribe({next:()=>{this.isSaving.set(!1),this.popupsService.success("Success","Driver registered successfully!",{onConfirm:()=>this.router.navigate(["users"]).then()})},error:l=>{this.popupsService.error("Failed to register driver",l.error?.message||"An error occurred while registering the driver."),this.isSaving.set(!1),console.error(l)}})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=w({type:i,selectors:[["app-new-driver-page"]],decls:15,vars:11,consts:[[1,"new-driver-container"],[1,"new-driver-content"],[3,"tabChange","tabs","activeTab","alignment"],["appTabIcon","personal"],["appTabIcon","vehicle"],[1,"save-message"],["appBox","",2,"margin-bottom","2rem"],[3,"tabId","activeTab"],[3,"personalInfoChange","personalInfo","showPhotoUpload"],[1,"form-actions"],[1,"save-button",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z","stroke","currentColor","stroke-width","2"],["d","M5 17h14M5 17a2 2 0 1 1 0-4M5 17a2 2 0 1 0 0-4m14 4a2 2 0 1 0 0-4m0 4a2 2 0 1 1 0-4M3 11l2-7h14l2 7M5 13h14","stroke","currentColor","stroke-width","2"],[3,"vehicleInfoChange","vehicleInfo","vehicleTypes","availableServices"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"app-tab-navigation",2),b("tabChange",function(a){return t.onTabChange(a)}),_(3,Y,2,0,"ng-template",3),g(4,z,1,0,null,4),s(),g(5,L,2,1,"div",5),r(6,"div",6)(7,"app-tab-content",7)(8,"app-personal-info-form",8),D("personalInfoChange",function(a){return N(t.personalInfo,a)||(t.personalInfo=a),a}),s()(),g(9,H,2,5,"app-tab-content",7),r(10,"div",9)(11,"button",10),b("click",function(){return t.saveChanges()}),d(),r(12,"svg",11),h(13,"path",12),s(),C(14," Save driver "),s()()()()()),n&2&&(o(2),p("tabs",t.tabs)("activeTab",t.activeTab())("alignment","left"),o(2),f(t.vehicleInfo()?4:-1),o(),f(t.saveMessage()?5:-1),o(2),p("tabId","personal")("activeTab",t.activeTab()),o(),M("personalInfo",t.personalInfo),p("showPhotoUpload",!1),o(),f(t.vehicleInfo()?9:-1),o(2),p("disabled",t.isSaving()))},dependencies:[k,B,O,F,E,R,q],styles:[".new-driver-container[_ngcontent-%COMP%]{min-height:100vh;background:#2a2a2a;color:#fff}.new-driver-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.save-message[_ngcontent-%COMP%]{background:#1a5c3a;color:#fff;padding:1rem;border-radius:8px;margin-bottom:1.5rem;text-align:center;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1.5rem}.save-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#d4af37;color:#1a1a1a;border:none;border-radius:8px;padding:.875rem 2rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.save-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5c34a;transform:translateY(-2px);box-shadow:0 4px 12px #d4af3766}.save-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media(max-width:640px){.new-driver-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{U as NewDriverPageComponent};
