import{b as E,c as g,d as R,e as T,f as q,g as _,i as k,l as A,m as D,s as V,v as z}from"./chunk-OXPWAMAC.js";import{f as O,g as S,i as y}from"./chunk-DMUBA5XY.js";import{a as G}from"./chunk-YHIKCUN3.js";import"./chunk-5IMUJISG.js";import{b as j}from"./chunk-GX4BJWGY.js";import"./chunk-WZWIJEA2.js";import{Ha as m,Hb as o,Ib as w,P as C,U as b,V as x,Va as F,eb as u,fa as v,fb as c,kb as P,lb as r,mb as n,nb as f,sc as N,ub as M,wb as h,yb as p}from"./chunk-GHGVHUHC.js";import"./chunk-TSRGIXR5.js";function $(t,s){t&1&&(r(0,"small"),o(1," First Name is required "),n())}function H(t,s){t&1&&(r(0,"small"),o(1," Last Name is required "),n())}function J(t,s){t&1&&o(0," Phone Number is required ")}function K(t,s){t&1&&o(0," Phone number format is invalid (e.g. 381601234567) ")}function Q(t,s){if(t&1&&(r(0,"small"),u(1,J,1,0)(2,K,1,0),n()),t&2){let e,i=p(2);m(),c(!((e=i.registerForm.get("phoneNumber"))==null||e.errors==null)&&e.errors.required?1:!((e=i.registerForm.get("phoneNumber"))==null||e.errors==null)&&e.errors.pattern?2:-1)}}function W(t,s){t&1&&(r(0,"small"),o(1," Address is required "),n())}function X(t,s){if(t&1&&(r(0,"div",10),f(1,"input",11),r(2,"label",12),o(3,"First Name"),n(),u(4,$,2,0,"small"),n(),r(5,"div",10),f(6,"input",13),r(7,"label",14),o(8,"Last Name"),n(),u(9,H,2,0,"small"),n(),r(10,"div",10),f(11,"input",15),r(12,"label",16),o(13,"Phone Number"),n(),u(14,Q,3,1,"small"),n(),r(15,"div",10),f(16,"input",17),r(17,"label",18),o(18,"Address"),n(),u(19,W,2,0,"small"),n()),t&2){let e,i,l,a,d=p();m(4),c((e=d.registerForm.get("firstName"))!=null&&e.invalid&&((e=d.registerForm.get("firstName"))!=null&&e.dirty||(e=d.registerForm.get("firstName"))!=null&&e.touched)?4:-1),m(5),c((i=d.registerForm.get("lastName"))!=null&&i.invalid&&((i=d.registerForm.get("lastName"))!=null&&i.dirty||(i=d.registerForm.get("lastName"))!=null&&i.touched)?9:-1),m(5),c((l=d.registerForm.get("phoneNumber"))!=null&&l.invalid&&((l=d.registerForm.get("phoneNumber"))!=null&&l.dirty||(l=d.registerForm.get("phoneNumber"))!=null&&l.touched)?14:-1),m(5),c((a=d.registerForm.get("address"))!=null&&a.invalid&&((a=d.registerForm.get("address"))!=null&&a.dirty||(a=d.registerForm.get("address"))!=null&&a.touched)?19:-1)}}function Z(t,s){t&1&&o(0," Email is required ")}function ee(t,s){t&1&&o(0," Please enter a valid email address ")}function te(t,s){if(t&1&&(r(0,"small",21),u(1,Z,1,0)(2,ee,1,0),n()),t&2){let e,i=p(2);m(),c(!((e=i.registerForm.get("email"))==null||e.errors==null)&&e.errors.required?1:!((e=i.registerForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function ie(t,s){t&1&&(r(0,"small",24),o(1," Password must be at least 6 characters "),n())}function re(t,s){t&1&&(r(0,"small"),o(1," Confirm Password is required "),n())}function ne(t,s){if(t&1&&(r(0,"div",10),f(1,"input",19),r(2,"label",20),o(3,"Email"),n(),u(4,te,3,1,"small",21),n(),r(5,"div",10),f(6,"input",22),r(7,"label",23),o(8,"Password"),n(),u(9,ie,2,0,"small",24),n(),r(10,"div",10),f(11,"input",25),r(12,"label",26),o(13,"Confirm Password"),n(),u(14,re,2,0,"small"),n()),t&2){let e,i,l,a=p();m(4),c((e=a.registerForm.get("email"))!=null&&e.invalid&&((e=a.registerForm.get("email"))!=null&&e.dirty||(e=a.registerForm.get("email"))!=null&&e.touched)?4:-1),m(5),c((i=a.registerForm.get("password"))!=null&&i.invalid&&((i=a.registerForm.get("password"))!=null&&i.dirty||(i=a.registerForm.get("password"))!=null&&i.touched)?9:-1),m(5),c((l=a.registerForm.get("confirmPassword"))!=null&&l.invalid&&((l=a.registerForm.get("confirmPassword"))!=null&&l.dirty||(l=a.registerForm.get("confirmPassword"))!=null&&l.touched)?14:-1)}}function oe(t,s){if(t&1&&(r(0,"small",4),o(1),n()),t&2){let e=p();m(),w(e.errorMessage())}}function le(t,s){if(t&1){let e=M();r(0,"button",27),h("click",function(){b(e);let l=p();return x(l.next())}),o(1,"Next"),n()}}function se(t,s){if(t&1){let e=M();r(0,"button",27),h("click",function(){b(e);let l=p();return x(l.previous())}),o(1,"Previous"),n(),r(2,"button",28),o(3," Register "),n()}if(t&2){let e=p();m(2),P("disabled",e.isSubmitButtonDisabled())}}var B=class t{unregisteredAuthService=C(G);router=C(O);popupsService=C(j);errorMessage=v(null);isSubmitButtonDisabled=v(!1);step=1;registerForm=new q({firstName:new _("",[g.required]),lastName:new _("",[g.required]),phoneNumber:new _("",[g.required,g.pattern("^\\+?[1-9]\\d{1,14}$")]),address:new _("",[g.required]),email:new _("",[g.required,g.email]),password:new _("",[g.required,g.minLength(6)]),confirmPassword:new _("",[g.required])});onSubmit(){if(!this.registerForm.valid){alert("Please fill in the form correctly.");return}let s=this.registerForm.get("firstName")?.value??"",e=this.registerForm.get("lastName")?.value??"",i=this.registerForm.get("phoneNumber")?.value??"",l=this.registerForm.get("address")?.value??"",a=this.registerForm.get("email")?.value??"",d=this.registerForm.get("password")?.value??"",L=this.registerForm.get("confirmPassword")?.value??"";if(this.errorMessage.set(null),d!==L){this.errorMessage.set("Passwords do not match");return}let I={firstName:s,lastName:e,phone:i,address:l,email:a,password:d},U=this.unregisteredAuthService.register(I);this.isSubmitButtonDisabled.set(!0),U.subscribe({next:()=>{this.popupsService.success("Success","Registered successfully! Please check your email to activate your account.",{onConfirm:()=>this.router.navigate(["/login"]).then()}),this.isSubmitButtonDisabled.set(!1)},error:Y=>{this.errorMessage.set(Y.error?.error||"An error occurred during registration"),this.isSubmitButtonDisabled.set(!1)}})}previous(){this.step=this.step-1}next(){this.isValid()&&(this.step=this.step+1)}isValid(){return this.step===1?(this.registerForm.get("firstName")?.invalid&&this.registerForm.get("firstName")?.markAsTouched(),this.registerForm.get("lastName")?.invalid&&this.registerForm.get("lastName")?.markAsTouched(),this.registerForm.get("phoneNumber")?.invalid&&this.registerForm.get("phoneNumber")?.markAsTouched(),this.registerForm.get("address")?.invalid&&this.registerForm.get("address")?.markAsTouched(),!!this.registerForm.get("firstName")?.valid&&!!this.registerForm.get("lastName")?.valid&&!!this.registerForm.get("phoneNumber")?.valid&&!!this.registerForm.get("address")?.valid):(this.registerForm.get("email")?.invalid&&this.registerForm.get("email")?.markAsTouched(),this.registerForm.get("password")?.invalid&&this.registerForm.get("password")?.markAsTouched(),this.registerForm.get("confirmPassword")?.invalid&&this.registerForm.get("confirmPassword")?.markAsTouched(),!!this.registerForm.get("email")?.valid&&!!this.registerForm.get("password")?.valid&&!!this.registerForm.get("confirmPassword")?.valid)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=F({type:t,selectors:[["app-register"]],decls:18,vars:6,consts:[[1,"main"],[1,"object"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"login-container"],["id","error-register"],[1,"button-container"],["type","button",1,"submit-btn"],[1,"form-bottom"],[1,"divider"],["routerLink","/login",1,"register-link"],[1,"form-group"],["type","text","id","firstName","formControlName","firstName","required","","placeholder"," "],["for","firstName","id","focus"],["type","text","id","lastName","formControlName","lastName","required","","placeholder"," "],["for","lastName","id","focus"],["type","tel","id","phoneNumber","formControlName","phoneNumber","required","","placeholder"," "],["for","phoneNumber","id","focus"],["type","text","id","address","formControlName","address","required","","placeholder"," "],["for","address","id","focus"],["type","email","id","email","formControlName","email","required","","placeholder"," "],["for","email","id","focus"],["id","emailError"],["type","password","id","password","formControlName","password","required","","placeholder"," "],["for","password","id","focus"],["id","passwordError"],["type","password","id","confirmPassword","formControlName","confirmPassword","required","","placeholder"," "],["for","confirmPassword","id","focus"],["type","button",1,"submit-btn",3,"click"],["type","submit","id","submit-btn",1,"submit-btn",3,"disabled"]],template:function(e,i){e&1&&(r(0,"main",0),f(1,"div",1),r(2,"form",2),h("ngSubmit",function(){return i.onSubmit()}),r(3,"div",3)(4,"h2"),o(5,"Register"),n(),u(6,X,20,4),u(7,ne,15,3),u(8,oe,2,1,"small",4),n(),r(9,"div",5),u(10,le,2,0,"button",6),u(11,se,4,1),n(),r(12,"div",7)(13,"div",8)(14,"a",9),o(15," You have an account? "),f(16,"br"),o(17," Login here! "),n()()()()()),e&2&&(m(2),P("formGroup",i.registerForm),m(4),c(i.step===1?6:-1),m(),c(i.step===2?7:-1),m(),c(i.errorMessage()?8:-1),m(2),c(i.step===1?10:-1),m(),c(i.step===2?11:-1))},dependencies:[z,k,E,R,T,V,D,A,N,y,S],styles:[".object[_ngcontent-%COMP%]{height:95%;width:80%;background-color:#145224;border-radius:10rem;overflow:hidden;align-items:flex-end;z-index:3;margin-right:-30vw}.user-form[_ngcontent-%COMP%]{z-index:2;align-self:center;display:flex;flex-direction:column;justify-content:space-evenly;width:30%;height:80%;padding:20px;border:.1rem solid #1C6331;border-radius:5px;background-color:#322d2b;font-size:1.5rem;color:#fff}.user-form[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{flex:3;display:flex;flex-direction:column;justify-content:space-evenly}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;border-bottom:#fff .1rem solid;margin-left:10px;margin-right:10px;margin-bottom:5rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:80%;margin-bottom:1rem;margin-left:10%;position:relative;height:4rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;padding:.3rem;border-radius:10px;border:#1C6331 .1rem solid;height:2rem;font-size:1.5rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   #focus[_ngcontent-%COMP%]{position:absolute;top:.3rem;left:.5rem;color:#aaa;pointer-events:none;transition:all .2s ease-out}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:#1C6331 .2rem solid}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:1rem}.user-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background-color:#1c6331;flex:1;color:#fff;border:none;border-radius:5px;font-size:1.5rem;cursor:pointer}.user-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background-color:#145224}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]{text-align:center;color:#ccc}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.user-form[_ngcontent-%COMP%]   .form-bottom[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin-bottom:1rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + #focus[_ngcontent-%COMP%], .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + #focus[_ngcontent-%COMP%]{top:-.9rem;font-size:.75rem;color:#fff}small[_ngcontent-%COMP%]{color:#ff4d4d;font-size:12px;display:block;margin-top:5px}.main[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:space-evenly;align-items:flex-end;flex-direction:row-reverse;background-color:#222121;overflow-x:hidden}@media(max-width:768px){.user-form[_ngcontent-%COMP%]{width:80%}.object[_ngcontent-%COMP%]{display:none}.main[_ngcontent-%COMP%]{align-items:center}.user-form[_ngcontent-%COMP%]{justify-content:center;font-size:1rem}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem;height:1rem}.user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{height:3.2rem}}#rememberMeGroup[_ngcontent-%COMP%]{width:80%;display:flex;align-items:center;margin-top:-10px}#rememberMeGroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto}#error-message[_ngcontent-%COMP%]{color:#ff4d4d;font-size:1rem;width:80%;margin-left:10%}#error-register[_ngcontent-%COMP%]{color:#ff4d4d;font-size:1.2rem;width:80%;margin-left:10%}"]})};export{B as Register};
