import{a as A}from"./chunk-QXKYPX7G.js";import{b as _,d as S,h as x,u as y}from"./chunk-OXPWAMAC.js";import{d as M,f as b}from"./chunk-DMUBA5XY.js";import{a as k}from"./chunk-YHIKCUN3.js";import"./chunk-5IMUJISG.js";import{b as O}from"./chunk-GX4BJWGY.js";import"./chunk-WZWIJEA2.js";import{Ha as c,Hb as a,Mb as l,Nb as g,Ob as u,P as s,Va as h,W as d,X as w,fa as m,kb as P,lb as t,mb as n,nb as p,wb as C}from"./chunk-GHGVHUHC.js";import"./chunk-TSRGIXR5.js";var D=class f{activatedRoute=s(M);popupsService=s(O);router=s(b);unregisteredAuthService=s(k);passwordForm=m({newPassword:"",confirmPassword:""});accessToken="";isSaving=m(!1);ngOnInit(){this.activatedRoute.queryParams.subscribe(r=>{let o=r.token;if(!o){this.popupsService.error("Error","Invalid activation link. No token provided.",{onConfirm:()=>{this.router.navigate(["/"]).then()}});return}this.accessToken=o})}activateAccount(){if(!this.accessToken)return;let r=this.passwordForm().newPassword,o=this.passwordForm().confirmPassword;if(r!==o){this.popupsService.error("Error","Passwords do not match.");return}if(r.length<8){this.popupsService.error("Error","Password must be at least 8 characters long.");return}this.isSaving.set(!0),this.unregisteredAuthService.activateDriverAccount(this.accessToken,r).subscribe({next:e=>{this.popupsService.success("Success",e.message,{onConfirm:()=>{this.router.navigate(["/login"]).then()}})},error:e=>{this.popupsService.error("Error",e?.error?.message||"An error occurred during activation.")},complete:()=>{this.isSaving.set(!1)}})}static \u0275fac=function(o){return new(o||f)};static \u0275cmp=h({type:f,selectors:[["app-driver-activation"]],decls:23,vars:3,consts:[[1,"container"],[1,"content"],["appBox","",1,"password-section"],[1,"section-title"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M12 17v-4M7 12V9a5 5 0 1 1 10 0v3","stroke","currentColor","stroke-width","2"],["x","5","y","11","width","14","height","10","rx","2","stroke","currentColor","stroke-width","2"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword",1,"form-input",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"save-button",3,"click","disabled"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","2","stroke-linecap","round"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Driver account activation"),n(),t(4,"div",2)(5,"h3",3),d(),t(6,"svg",4),p(7,"path",5)(8,"rect",6),n(),a(9," Set your new password "),n(),w(),t(10,"div",7)(11,"label",8),a(12,"New Password"),n(),t(13,"input",9),u("ngModelChange",function(i){return g(e.passwordForm().newPassword,i)||(e.passwordForm().newPassword=i),i}),n()(),t(14,"div",7)(15,"label",10),a(16,"Confirm new password"),n(),t(17,"input",11),u("ngModelChange",function(i){return g(e.passwordForm().confirmPassword,i)||(e.passwordForm().confirmPassword=i),i}),n()(),t(18,"div",12)(19,"button",13),C("click",function(){return e.activateAccount()}),d(),t(20,"svg",4),p(21,"path",14),n(),a(22," Activate Account "),n()()()()()),o&2&&(c(13),l("ngModel",e.passwordForm().newPassword),c(4),l("ngModel",e.passwordForm().confirmPassword),c(2),P("disabled",e.isSaving()))},dependencies:[A,y,_,S,x],styles:[".container[_ngcontent-%COMP%]{min-height:100vh;background:#2a2a2a;color:#fff}.content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem}h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:2.5rem;color:#d4af37;text-align:center}.password-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{max-width:600px;margin-bottom:1rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.125rem;font-weight:600;margin-bottom:1.5rem;color:#fff}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;color:#d1d5db}.form-input[_ngcontent-%COMP%]{background:#1a5c3a;border:none;border-radius:8px;padding:.875rem 1rem;color:#fff;font-size:1rem;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #d4af374d}.form-input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1.5rem}.save-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#d4af37;color:#1a1a1a;border:none;border-radius:8px;padding:.875rem 2rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.save-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5c34a;transform:translateY(-2px);box-shadow:0 4px 12px #d4af3766}.save-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media(max-width:640px){.content[_ngcontent-%COMP%]{padding:1rem}.form-section[_ngcontent-%COMP%]{padding:1.5rem}}"]})};export{D as DriverActivationComponent};
