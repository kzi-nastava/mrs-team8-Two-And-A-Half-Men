@if (isOpen) {
	<div class="chat-container">
		<div class="chat-header">
			<span class="chat-title">{{ title }}</span>
			<div class="chat-actions">
				@if (isMinimizable) {
					<button class="action-btn" (click)="onMinimize()" title="Minimize">−</button>
				}
				<button class="action-btn" (click)="onClose()" title="Close">×</button>
			</div>
		</div>

		<div class="chat-messages">
			@if (isLoading()) {
				<div class="loading-indicator">Loading messages...</div>
			}

			@for (message of messages(); track message.id) {
				<div [class]="'message ' + (isOwnMessage(message) ? 'own-message' : 'other-message')">
					<div class="message-content">
						@if (!isOwnMessage(message)) {
							<div class="checkmark">✓</div>
						}
						{{ message.content }}
						<span class="message-time">{{ formatTime(message.timestamp) }}</span>
					</div>
				</div>
			}
		</div>

		<div class="chat-input-container">
			<input
				type="text"
				class="chat-input"
				placeholder="Type text..."
				[value]="newMessage()"
				(input)="newMessage.set($any($event.target).value)"
				(keyup.enter)="onSend()"
			/>
			<button class="send-btn" (click)="onSend()">Send</button>
		</div>
	</div>
}
